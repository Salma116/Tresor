pico-8 cartridge // http://www.pico-8.com
version 29
__lua__


function _init()
create_player()
init_msg()
create_msg("mr pole emploi","j'ai faim",
"ventre vide = pas de formation")
end

function _update()
	if not messages[1] then
		player_mouvment()
	end
	update_camera()
	update_msg()
end		

function _draw()
cls()
draw_map()
draw_player()
draw_msg()
end

-->8
--map
function draw_map()
	map(0,0,0,0,128,64)
	end
	
function check_flag(flag,x,y)
	local sprite = mget(x,y)
	return fget(sprite,flag)
end

function update_camera()
	camx=flr(p.x/16)*16
	camy=flr(p.y/16)*16
	camera(camx*8,camy*8)
end

function next_tile(x,y)
	local sprite=mget(x,y)
	mset (x,y,sprite+1)
end

function pick_up_key(x,y)
	next_tile(x,y)
	p.keys+=1
--	sfx() "son"
end
	
-->8
--player
function create_player()
p={x=6,y=6,sprite=19,keys=0}
end

function player_mouvment()
  newx=p.x
  newy=p.y
		if (btnp(➡️))	newx+=1 
		if (btnp(⬅️))	newx-=1	
		if (btnp(⬇️))	newy+=1
		if (btnp(⬆️))	newy-=1
		
	 if not check_flag(0,newx,newy)
	then 
 		p.x=newx
 		p.y=newy
 	end
end

function draw_player()
spr(p.sprite,p.x*8,p.y*8)
spr(17,120,56)
end


		


-->8

-->8
--message
function init_msg()
	messages={}
end

function create_msg(name,...)
	msg_title=name
	messages={...}
end

function update_msg()
	if btnp(❎) then 
		deli(messages,1)
	end
end

function draw_msg()
	if messages[1] then
	local y=100
	rectfill(6,y,
		6+#msg_title*4,y+6,14)
	rectfill(2,y+9,125,y+20,2)
	print(msg_title,7,y+1,7)
	print(messages[1],4,y+10,7)
	end
end
	
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000aaaaa000000000000222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000aaaa8aa0000000000e244420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000aaaaa00000000224b4b22000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000aaaa0000000022444422000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000aaaa0000000022211122000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000aaaaaaaa0000000002817180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000aaaaaa00000000000011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000aaa000000000000080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000bbbb0033333333333333330000000099999999999999990e20d1800000000000000000000000000000000000000000000000000000000000000000
000000000bbaabb033733333333333330000000099999999999999990e20d1800000000000000000000000000000000000000000000000000000000000000000
000000000bbbabb037a733333333333300000000999999994c477444000000000000000000000000000000000000000000000000000000000000000000000000
0000000003bbbb1033733333333333330000000099997999444774440d0820100000000000000000000000000000000000000000000000000000000000000000
00000000013bb11033333733333333330000000099979799444444440d0820100000000000000000000000000000000000000000000000000000000000000000
000000000002200033337a7333333333000000009999799949999994000000000000000000000000000000000000000000000000000000000000000000000000
000000000004400033333733333333330000000099999999499999940e2c0ed00000000000000000000000000000000000000000000000000000000000000000
000000000014420033333333333333330000000099999999499999940e2c0ed00000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
4141414141414141414141414141414147474747474747474747474747474747470000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141414141414141414141414141414145454545454545454545454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434343434343434343434343434145454545454545454545454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434343434343434343434343434145454545454545454545454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434342434343434343424343434145454545464645464545464546454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434343434343434343434343434145454545454545454545454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434343434343424343434343434145454545454545454545454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434343434343434343434343434343434545454546454545464545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141434343434343434343434343434145454545454545454545454545454546450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141434343424343434343434343434145454545454545454546454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434343434343434343434243434145454545454545454545454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434343434341414143434343434145454546454545454545454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4143434343434341434343434343434145454545454545454545454545454545450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141414141414141414141414141414147470000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
